platform: linux
image_resource:
  type: registry-image
  source:
    repository: sonarsource/sonar-scanner-cli
inputs:
  - name: git-ci
run:
  path: sh
  args:
    - -exc
    - |
      cd git-ci
      ls -la # Liste le contenu pour v√©rifier
      echo "Starting SonarQube Scanner"
      sonar-scanner \
        -Dsonar.projectKey=${SONAR_PROJECT_KEY} \
        -Dsonar.sources=${SONAR_SOURCES} \
        -Dsonar.host.url=${SONAR_HOST_URL} \
        -Dsonar.login=${SONAR_LOGIN} \
        -Dsonar.java.binaries=target/classes
